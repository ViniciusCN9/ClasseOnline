<div *ngIf="funcao == 1">
    <button class="btn btn-primary w-100" (click)="adicionarConteudo(adicionarModal)">Adicionar conteúdo</button>
    <hr class="w-100">
</div>
<div *ngIf="postagens.length == 0" class="alert alert-warning" id="alerta" role="alert">
    Nenhum conteúdo encontrado!
</div>
<div class="list-group">
    <div *ngFor="let postagem of postagens" class="list-group-item flex-column align-items-start">
        <div role="button" (click)="collapse.toggle(); carregarAnexos(postagem.id)">
            <div class="d-flex w-100 justify-content-between align-items-center p-1">
                <h5 class="mb-1">{{postagem.titulo}}</h5>
                <small><strong>{{postagem.timestamp * 1000 | date:'dd/MM/YYYY'}}</strong></small>
            </div>
            <div class="d-flex w-100 justify-content-between align-items-center p-1">
                <p>{{postagem.texto}}</p>
                <span class="badge bg-dark rounded-pill" title="Anexos">{{postagem.anexos.length}}</span>
            </div>
        </div>
        <div #collapse="ngbCollapse" [ngbCollapse]="true">
            <div *ngFor="let anexo of anexos" class="d-flex w-100 mx-2">
                <div class="card">
                    <div class="d-flex justify-content-center align-items-center p-3 text-muted">
                        <fa-icon [icon]="iconeArquivo" size="3x"></fa-icon>
                    </div>
                    <div class="card-body">
                        <a class="card-title text-decoration-none text-dark stretched-link" role="button" (click)="downloadArquivo(anexo.id, anexo.nome)">{{anexo.nome}}</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<ng-template #adicionarModal let-adicionarModal>
	<div class="modal-header">
		<h4 class="modal-title" id="modal-basic-title">Nova postagem</h4>
		<button type="button" class="btn-close" (click)="adicionarModal.dismiss()"></button>
	</div>
	<div class="modal-body">
		<form [formGroup]="formAdicionarConteudo" class="d-flex flex-column justify-content-center w-75">
            <div class="form-group mb-3">
                <label for="titulo">Título</label>
                <input formControlName="titulo" type="text" class="form-control mt-1" id="titulo">
            </div>
            <div class="form-group mb-3">
                <label for="texto">Texto</label>
                <textarea formControlName="texto" type="text" class="form-control mt-1" id="texto"></textarea>
            </div>
            <div class="form-group mb-3">
                <label for="anexos">Anexos</label>
                <input formControlName="anexos" type="file" multiple class="form-control mt-1" id="anexos" (change)="alteracaoArquivos($event)">
            </div>
            <div *ngFor="let arquivo of arquivos" class="form-group mb-3">
                <p>{{arquivo.name}}</p>
            </div>
        </form>
	</div>
	<div class="modal-footer">
		<button type="button" class="btn btn-danger" (click)="adicionarModal.dismiss()">Cancelar</button>
		<button type="button" class="btn btn-success" (click)="adicionarModal.close()">Salvar</button>
	</div>
</ng-template>
    

